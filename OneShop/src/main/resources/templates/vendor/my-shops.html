<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="${pageTitle}">Shop của tôi</title>
    <link rel="stylesheet" th:href="@{/vendor/bootstrap/bootstrap.min.css}" />
    <link
      rel="stylesheet"
      th:href="@{/fonts/fontawesome/fontawesome.min.css}"
    />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/css/vendor.css}" />
    <style>
      body {
        background-color: #f3f4f6;
      }
      .vendor-section {
        background: #fff;
        border-radius: 20px;
        padding: 28px;
        box-shadow: 0 16px 40px rgba(15, 23, 42, 0.08);
        border: 1px solid rgba(15, 23, 42, 0.06);
      }
      .shop-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 24px;
      }
      .shop-card {
        background: #fff;
        border-radius: 18px;
        border: 1px solid rgba(15, 23, 42, 0.08);
        padding: 24px;
        display: flex;
        flex-direction: column;
        gap: 18px;
        box-shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .shop-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 22px 45px rgba(37, 99, 235, 0.2);
      }
      .shop-card header {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }
      .metric-line {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 0.95rem;
        color: #475569;
      }
      .metric-line strong {
        color: #0f172a;
      }
      .badge-status {
        border-radius: 999px;
        padding: 0.4rem 0.85rem;
        font-weight: 600;
        font-size: 0.85rem;
      }
      .actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }
    </style>
  </head>
  <body class="bg-light">
    <div th:replace="~{vendor/fragments/nav :: vendorNav('shops')}"></div>

    <main class="container py-4">
      <section class="vendor-section mb-4">
        <div
          class="d-flex flex-column flex-lg-row justify-content-between gap-3 align-items-start align-items-lg-center"
        >
          <div>
            <h1 class="h4 mb-1">Shop của tôi</h1>
            <p class="text-muted mb-0">
              Quản lý danh sách shop và tình trạng hoạt động.
            </p>
          </div>
          <div class="d-flex gap-2">
            <a class="btn btn-outline-secondary" th:href="@{/vendor/dashboard}">
              <i class="fas fa-arrow-left me-2"></i>Quay lại Dashboard
            </a>
            <a class="btn btn-primary" th:href="@{/vendor/shop/register}">
              <i class="fas fa-plus me-2"></i>Đăng ký shop
            </a>
          </div>
        </div>
      </section>

      <section
        class="shop-grid"
        th:if="${shops != null && !#lists.isEmpty(shops)}"
      >
        <article
          class="shop-card"
          th:each="shop : ${shops}"
          th:with="status=${shop.status != null ? shop.status : 'PENDING'}"
        >
          <header>
            <div>
              <h2 class="h6 mb-1" th:text="${shop.shopName}">Tên shop</h2>
              <span class="text-muted small" th:text="${shop.shopSlug}"
                >shop-slug</span
              >
            </div>
          </header>

          <div>
            <span
              class="badge-status"
              th:classappend="${status == 'ACTIVE'} ? ' bg-success-subtle text-success' :
                                 (${status == 'PENDING'} ? ' bg-warning-subtle text-warning' : ' bg-danger-subtle text-danger')"
              th:text="${status == 'ACTIVE'} ? 'Hoạt động' :
                         (${status == 'PENDING'} ? 'Chờ duyệt' : 'Tạm ngưng')"
            >
              Hoạt động
            </span>
          </div>

          <div class="metric-line">
            <i class="fas fa-cubes text-primary"></i>
            <span
              >Sản phẩm:
              <strong
                th:text="${shop.totalProducts != null ? shop.totalProducts : 0}"
                >0</strong
              ></span
            >
          </div>
          <div class="metric-line">
            <i class="fas fa-shopping-bag text-success"></i>
            <span
              >Đơn hàng:
              <strong
                th:text="${shop.totalOrders != null ? shop.totalOrders : 0}"
                >0</strong
              ></span
            >
          </div>
          <div class="metric-line">
            <i class="fas fa-money-bill-wave text-info"></i>
            <span
              >Doanh thu:
              <strong
                th:text="${shop.totalRevenue != null ?
              #numbers.formatDecimal(shop.totalRevenue, 0, 'DEFAULT', 0, 'DEFAULT') + ' đ' : '0 đ'}"
                >0 đ</strong
              ></span
            >
          </div>
          <div class="metric-line">
            <i class="fas fa-calendar-alt text-secondary"></i>
            <span
              >Ngày tạo:
              <strong
                th:text="${shop.createdAt != null ?
              #temporals.format(shop.createdAt, 'dd/MM/yyyy') : 'N/A'}"
                >01/01/2024</strong
              ></span
            >
          </div>

          <div class="actions">
            <a
              class="btn btn-primary btn-sm flex-fill"
              th:href="@{'/vendor/dashboard/' + ${shop.shopId}}"
            >
              <i class="fas fa-tachometer-alt me-1"></i>Dashboard
            </a>
            <a
              class="btn btn-outline-secondary btn-sm flex-fill"
              th:href="@{'/vendor/shop/settings?shopId=' + ${shop.shopId}}"
            >
              <i class="fas fa-sliders-h me-1"></i>Cài đặt
            </a>
            <a
              class="btn btn-outline-secondary btn-sm flex-fill"
              th:href="@{'/shop/' + ${shop.shopSlug}}"
              target="_blank"
            >
              <i class="fas fa-external-link-alt"></i>
            </a>
          </div>
        </article>
      </section>

      <section
        class="vendor-section text-center py-5"
        th:if="${shops == null || #lists.isEmpty(shops)}"
      >
        <div class="mb-3">
          <i class="fas fa-store fa-2x text-primary"></i>
        </div>
        <h5 class="fw-semibold mb-2">Bạn chưa có shop nào</h5>
        <p class="text-muted mb-4">
          Đăng ký shop mới để bắt đầu kinh doanh cùng OneShop.
        </p>
        <a class="btn btn-primary btn-lg" th:href="@{/vendor/shop/register}">
          <i class="fas fa-plus-circle me-2"></i>Đăng ký shop ngay
        </a>
      </section>
    </main>

    <script th:src="@{/vendor/bootstrap/jquery-3.6.0.min.js}"></script>
    <script th:src="@{/vendor/bootstrap/bootstrap.bundle.min.js}"></script>
  </body>
</html>
