<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="${pageTitle}">Bảng điều khiển shop</title>
    <link rel="stylesheet" th:href="@{/vendor/bootstrap/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/fonts/fontawesome/fontawesome.min.css}" />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/css/vendor.css}" />
  </head>
  <body>
    <header th:replace="~{/web/fragments/header :: header}"></header>

    <main class="section" style="padding-top: 40px;">
      <div class="container">
        <div th:replace="~{vendor/fragments/nav :: vendorNav('dashboard')}"></div>

        <div class="row g-4">
          <div class="col-lg-8">
            <div class="vendor-card">
              <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
                <div>
                  <h2 class="mb-1" th:text="${shop.shopName}">Tên shop</h2>
                  <p class="mb-2 text-muted" th:text="${shop.shopDescription} ?: 'Chưa cập nhật mô tả'">
                    Mô tả shop
                  </p>
                  <span class="badge vendor-status"
                        th:classappend="${shop.status.name()}=='ACTIVE' ? ' bg-success' :
                                       (${shop.status.name()}=='PENDING' ? ' bg-warning text-dark' : ' bg-secondary')"
                        th:text="${shop.status}">TRẠNG THÁI</span>
                </div>
                <div class="text-center">
                  <img th:if="${shop.shopLogo != null}"
                       th:src="@{'/loadImage?imageName=' + ${shop.shopLogo}}"
                       alt="Logo shop" class="vendor-logo-preview" />
                  <div th:if="${shop.shopLogo == null}" class="text-muted">
                    <i class="fas fa-store fa-3x"></i>
                    <p class="mt-2 mb-0">Chưa có logo</p>
                  </div>
                </div>
              </div>
              <div class="mt-3 text-muted small">
                <i class="fas fa-phone"></i>
                <span th:text="${shop.phoneNumber} ?: 'Chưa cập nhật'">Số điện thoại</span>
                <span class="mx-2">|</span>
                <i class="fas fa-map-marker-alt"></i>
                <span th:text="${shop.address} ?: 'Chưa cập nhật địa chỉ'">Địa chỉ</span>
              </div>
            </div>
          </div>

          <div class="col-lg-4">
            <div class="vendor-card text-center">
              <h5 class="text-muted">Doanh thu đã giao</h5>
              <h2 class="fw-bold text-primary" th:text="${#numbers.formatDecimal(totalRevenue,1,'DEFAULT',0,'DEFAULT')} + ' đ'">
                0 đ
              </h2>
              <p class="mb-0 text-muted">Tổng doanh thu từ các đơn đã giao thành công</p>
            </div>
          </div>
        </div>

        <div class="row g-4 mt-1">
          <div class="col-md-3 col-sm-6">
            <div class="vendor-metric">
              <h3 th:text="${productCount}">0</h3>
              <span>Sản phẩm</span>
            </div>
          </div>
          <div class="col-md-3 col-sm-6">
            <div class="vendor-metric">
              <h3 th:text="${pendingOrders}">0</h3>
              <span>Đơn chờ xử lý</span>
            </div>
          </div>
          <div class="col-md-3 col-sm-6">
            <div class="vendor-metric">
              <h3 th:text="${shippingOrders + confirmedOrders}">0</h3>
              <span>Đơn đang giao/đã xác nhận</span>
            </div>
          </div>
          <div class="col-md-3 col-sm-6">
            <div class="vendor-metric">
              <h3 th:text="${deliveredOrders}">0</h3>
              <span>Đơn đã giao</span>
            </div>
          </div>
        </div>

        <div class="vendor-card mt-4">
          <h4 class="mb-3">Gợi ý hành động</h4>
          <div class="row gy-3">
            <div class="col-md-4">
              <div class="border rounded-3 p-3 h-100">
                <h5 class="fw-semibold">Thêm sản phẩm</h5>
                <p class="text-muted">Bổ sung sản phẩm mới để khách hàng có thêm lựa chọn.</p>
                <a class="btn btn-primary w-100" th:href="@{/vendor/products/new}">
                  <i class="fas fa-plus"></i> Thêm sản phẩm
                </a>
              </div>
            </div>
            <div class="col-md-4">
              <div class="border rounded-3 p-3 h-100">
                <h5 class="fw-semibold">Cập nhật banner</h5>
                <p class="text-muted">Trang trí shop hấp dẫn hơn với banner nổi bật.</p>
                <a class="btn btn-outline-primary w-100" th:href="@{/vendor/shop/settings}">
                  <i class="fas fa-image"></i> Cập nhật hình ảnh
                </a>
              </div>
            </div>
            <div class="col-md-4">
              <div class="border rounded-3 p-3 h-100">
                <h5 class="fw-semibold">Theo dõi đơn hàng</h5>
                <p class="text-muted">Kiểm tra trạng thái đơn để chăm sóc khách hàng tốt hơn.</p>
                <a class="btn btn-outline-primary w-100" th:href="@{/admin/vendor-chat}" target="_blank">
                  <i class="fas fa-comments"></i> Chat với khách hàng
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer th:replace="~{/web/fragments/footer :: footer}"></footer>

    <script th:src="@{/vendor/bootstrap/jquery-3.6.0.min.js}"></script>
    <script th:src="@{/vendor/bootstrap/bootstrap.bundle.min.js}"></script>
  </body>
</html>

